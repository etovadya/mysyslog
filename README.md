# Демон `mysyslog-daemon`: Запись лог-сообщений с обработкой сигналов

Этот код реализует простой демон (`mysyslog-daemon`), который периодически записывает сообщения в лог-файл, используя библиотеку `libmysyslog`. Демон обрабатывает сигналы `SIGTERM` и `SIGINT` для корректного завершения.


## Заголовочные файлы

* `<stdio.h>`: Стандартная библиотека ввода-вывода.
* `<stdlib.h>`: Стандартная библиотека утилит (включает `exit`).
* `<signal.h>`: Библиотека для работы с сигналами.
* `<unistd.h>`: Библиотека для работы с POSIX-системами (включает `sleep`).
* `"libmysyslog.h"`: Пользовательский заголовочный файл, предполагается, что он содержит объявление функции `mysyslog`.


## Функция обработки сигналов `handle_signal`

Функция `handle_signal` обрабатывает сигналы. Она проверяет, является ли сигнал `SIGTERM` (завершение) или `SIGINT` (прерывание) и, если да, выводит сообщение и завершает программу с кодом 0. В более сложных демонах здесь может быть добавлена логика для корректного завершения работы (например, очистка ресурсов).


## Основная функция `main`

Функция `main` выполняет следующие действия:

1. *Установка обработчиков сигналов:* `signal(SIGTERM, handle_signal);` и `signal(SIGINT, handle_signal);` устанавливают функцию `handle_signal` в качестве обработчика для сигналов `SIGTERM` и `SIGINT`.

2. *Бесконечный цикл:* `while (1) { ... }` запускает бесконечный цикл, в котором демон работает постоянно.

3. *Запись в лог:* `mysyslog("Daemon running", INFO, 0, "/var/log/mysyslog.log");` Внутри цикла вызывается функция `mysyslog` для записи сообщения "Daemon running" в лог-файл `/var/log/mysyslog.log` с уровнем логирования `INFO` и драйвером 0 (предположительно, текстовый драйвер).

4. *Пауза:* `sleep(60);` Программа приостанавливается на 60 секунд перед следующей записью в лог.


## Запуск демона

Этот код можно скомпилировать и запустить как обычную программу. Для работы в фоновом режиме его нужно запустить с помощью системных утилит, таких как `nohup`, `screen`, `systemd` или других, в зависимости от операционной системы.


## Зависимости

Этот код зависит от библиотеки `libmysyslog`, которая должна быть скомпилирована и доступна во время выполнения. Файл `libmysyslog.h` должен находиться в доступном для компилятора месте.
